{"mappings":"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","sources":["src/js/10-module/10-04/10-04-main-script.js","src/js/10-module/10-04/templates/pokemon-card.hbs","src/js/10-module/10-04/pokemon-api-service.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport markupPokemonCardTmp from './templates/pokemon-card.hbs';\nimport PokemonApiService from './pokemon-api-service';\n\nconst containerRef = document.querySelector('.js-container');\nconst guard = document.querySelector('.js-guard');\nconst options = {\n  root: null,\n  rootMargin: '500px',\n  threshold: 0,\n};\n\nlet observer = new IntersectionObserver(onLoad, options);\n\nconst pokemonApiService = new PokemonApiService();\n\nstart();\n\nfunction start() {\n  pokemonApiService\n    .fetchPokemons()\n    .then(getPokemons)\n    .catch(err => {\n      Notiflix.Notify.failure(err);\n    });\n}\n\nfunction onLoad(entries, observer) {\n  entries.forEach(entry => {\n    if (entry.isIntersecting) {\n      console.log('Observer');\n      // pokemonApiService.offsetNum += 5;\n      pokemonApiService.increment(5);\n      pokemonApiService\n        .fetchPokemons()\n        .then(getPokemons)\n        .catch(err => {\n          Notiflix.Notify.failure(err);\n        });\n    }\n  });\n}\n\nfunction getPokemons(pokemons) {\n  for (const pokemon of pokemons.results) {\n    fetch(pokemon.url)\n      .then(resp => {\n        if (!resp.ok) {\n          throw new Error(resp.statusText);\n        }\n        return resp.json();\n      })\n      .then(pokemon => {\n        appendPokemonMarkup(pokemon);\n      })\n      .catch(err => {\n        Notiflix.Notify.failure(err);\n      });\n  }\n}\n\nfunction appendPokemonMarkup(pokemon) {\n  containerRef.insertAdjacentHTML('beforeend', markupPokemonCardTmp(pokemon));\n  observer.observe(guard);\n}\n","<div class=\"card\">\n    <div class=\"card-img-top\">\n        <img src=\"{{sprites.other.dream_world.front_default}}\" alt=\"{{name}}\">\n    </div>\n    <div class=\"card-body\">\n        <h2 class=\"card-title\">Имя: {{name}}</h2>\n        <p class=\"card-text\">Рост: {{height}}</p>\n        <p class=\"card-text\">Вес: {{weight}}</p>\n\n        <p class=\"card-text\"><b>Умения</b></p>\n        <ul class=\"list-group\"></ul>\n        {{#each abilities}}\n        <li class=\"list-group-item\">{{ability.name}}</li>\n        {{/each}}\n        </ul>\n    </div>\n</div>","const BASE_URL = 'https://pokeapi.co/api/v2';\nconst options = {\n  method: 'GET',\n};\n\nexport default class PokemonApiService {\n  constructor() {\n    this.offset = 0;\n  }\n\n  fetchPokemons() {\n    const endPoint = 'pokemon';\n    const id = '1';\n    // const offset = 20;\n    const url = `${BASE_URL}/${endPoint}`;\n\n    return fetch(`${url}?limit=20&offset=${this.offset}`, options).then(resp => {\n      if (!resp.ok) {\n        throw new Error(resp.statusText);\n      }\n\n      return resp.json();\n    });\n  }\n\n  increment(amount) {\n    this.offset += amount;\n  }\n\n  get offsetNum() {\n    return this.offset;\n  }\n\n  set offsetNum(newAmount) {\n    this.offset = newAmount;\n  }\n}\n"],"names":["$4vA6L","parcelRequire","$b14fb7d02d9c41d2$export$2e2bcd8739ae039","$parcel$interopDefault","template","container","depth0","helpers","partials","data","stack1","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","escapeExpression","lambda","compiler","main","helper","alias1","alias2","nullContext","alias3","hooks","helperMissing","alias4","name","hash","loc","start","line","column","end","fn","program","inverse","noop","useData","$b5e18cf3535d571a$var$options","method","$2835f0f42203c05e$var$containerRef","document","querySelector","$2835f0f42203c05e$var$guard","$2835f0f42203c05e$var$observer","IntersectionObserver","entries","observer","forEach","entry","isIntersecting","console","log","$2835f0f42203c05e$var$pokemonApiService","increment","fetchPokemons","then","$2835f0f42203c05e$var$getPokemons","catch","err","Notify","failure","root","rootMargin","threshold","constructor","this","offset","fetch","resp","ok","Error","statusText","json","amount","offsetNum","newAmount","pokemons","pokemon","results","url","$2835f0f42203c05e$var$appendPokemonMarkup","insertAdjacentHTML","observe"],"version":3,"file":"10-04-infinity-scrol.4b5b3e17.js.map"}