{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAUC,SAASC,cAAc,YACjCC,EAAUF,SAASC,cAAc,YAEvC,IAAIE,EAAO,EAYX,SAASC,EAAiBC,GAWxB,OAAOC,MAAM,wDAA8BD,IAP3B,CACdE,OAAQ,MACRC,QAAS,CACPC,cAAe,iCAIyCC,MAAKC,IAC/D,IAAKA,EAAKC,GACR,MAAM,IAAIC,MAAMF,EAAKG,YAGvB,OAAOH,EAAKI,MAAI,GAEpB,CAEA,SAASC,EAAQC,IASjB,SAAsBC,GACpB,MAAMC,EAASD,EACZE,KACC,EAACC,KAAEA,EAAIC,KAAEA,KAAW,kCACZD,uBACAC,0BAGTC,KAAK,IAERxB,EAAQyB,mBAAmB,YAAaL,EAC1C,CAnBEM,CAAaR,EAAKS,MAClBxB,EAAQyB,QAAS,EAEbV,EAAKZ,OAASY,EAAKW,QACrB1B,EAAQ2B,UAAW,EAEvB,CAeA,SAASC,EAAaC,GACpBC,EAAAnC,GAASoC,OAAOC,QAAQ,GAAGH,IAC7B,CAtDA7B,EAAQiC,iBAAiB,SAIzB,WACEhC,GAAQ,EAERC,EAAiBD,GAAMO,KAAKM,GAASoB,MAAMN,EAC7C,IANA1B,EAAiBD,GAAMO,KAAKM,GAASoB,MAAMN","sources":["src/js/10-module/10-03/10-03-main-script.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst listRef = document.querySelector('.js-list');\nconst loadBtn = document.querySelector('.js-load');\n\nlet page = 1;\n\nloadBtn.addEventListener('click', OnLoadBtn);\n\nlordOfTheRingAPI(page).then(getData).catch(onFetchError);\n\nfunction OnLoadBtn() {\n  page += 1;\n\n  lordOfTheRingAPI(page).then(getData).catch(onFetchError);\n}\n\nfunction lordOfTheRingAPI(page) {\n  const BASE_URL = 'https://the-one-api.dev/v2//character';\n  const ACCES_TOKEN = 'KGGoU-paQiSjHUQZi5Ok';\n\n  const options = {\n    method: 'GET',\n    headers: {\n      Authorization: `Bearer ${ACCES_TOKEN}`,\n    },\n  };\n\n  return fetch(`${BASE_URL}?limit=100&page=${page}`, options).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n\n    return resp.json();\n  });\n}\n\nfunction getData(data) {\n  createMarkup(data.docs);\n  loadBtn.hidden = false;\n\n  if (data.page === data.pages) {\n    loadBtn.disabled = true;\n  }\n}\n\nfunction createMarkup(arr) {\n  const markup = arr\n    .map(\n      ({ name, race }) => `<li class=\"item\">\n        <h2>${name}</h2>\n        <h3>${race}</h3>\n        </li>`,\n    )\n    .join('');\n\n  listRef.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction onFetchError(error) {\n  Notiflix.Notify.failure(`${error}`);\n}\n"],"names":["$4vA6L","parcelRequire","$e6a299fec7d1d5c9$var$listRef","document","querySelector","$e6a299fec7d1d5c9$var$loadBtn","$e6a299fec7d1d5c9$var$page","$e6a299fec7d1d5c9$var$lordOfTheRingAPI","page","fetch","method","headers","Authorization","then","resp","ok","Error","statusText","json","$e6a299fec7d1d5c9$var$getData","data","arr","markup","map","name","race","join","insertAdjacentHTML","$e6a299fec7d1d5c9$var$createMarkup","docs","hidden","pages","disabled","$e6a299fec7d1d5c9$var$onFetchError","error","$parcel$interopDefault","Notify","failure","addEventListener","catch"],"version":3,"file":"10-03-country.ae4e26ff.js.map"}